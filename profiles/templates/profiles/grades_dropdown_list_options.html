{% regroup grades by activity as activity_list %}
{% for activity in activity_list %}
    <div>{{ activity.grouper }}
        <div class="selectable-items-list">
            <!-- <div id="{{ activity.grouper|slugify }}_slider"></div> -->
<!--             <script>
                let slider = document.getElementById('{{ activity.grouper|slugify }}_slider');

                noUiSlider.create(slider, {
                    start: 1,
                    range: {
                        'min': 1,
                        'max': {{ activity.list|length }}
                    }
                });
            </script> -->

            {% for grade in activity.list %}
            <div>
                <input type="checkbox" name="grades" value="{{ grade.pk }}" id="id_grades_{{ grade.pk }}"{% if grade.pk in checked_grades %}checked{% endif %}>
                <label for="id_grades_{{ grade.pk }}" class="px-2 mb-1">{{ grade.name }}</label>
            </div>
            {% endfor %}

            <!-- <style>
            .grades-slider {
                -moz-appearance: none;
                -webkit-appearance: none;
                width: 100%;
                height: 1rem;
                border-radius: 0.5rem;
            }
            .grades-slider::-webkit-slider-thumb {
                -webkit-appearance: none;
                border: 1px solid rgba(255,255,255,1);
                height: 1rem;
                width: 1rem;
                border-radius: 40% !important;
                background: rgba(255,255,255,1) !important;
            }
            </style>
            <span id="{{ activity.grouper|slugify }}_grade">{% for grade in activity.list %}{% if grade.pk in checked_grades %}{{ grade.pk }}{% endif %}{% endfor %}</span>
            <span class="mr-2">{{ activity.list|first }}</span>
            <input type="range" name="grades" list="{{ activity.grouper|slugify }}" max="{{ activity.list|length }}" min="1" step="1" mousemove="displaySelectedValue(this.value)" onChange="displaySelectedValue(this.value)" class="grades-slider bg-info">
            <datalist id="{{ activity.grouper|slugify }}">
                {% for grade in activity.list %}
                <option value="{{ grade.pk }}" label="{{ grade.name }}">{{ grade.name }}</option>
                {% endfor %}
            </datalist>
            <span class="ml-2">{{ activity.list|last }}</span>
            <script>
                function displaySelectedValue(value) {
                    let valueTestElt = document.getElementById('{{ activity.grouper|slugify }}_grade');
                    valueTestElt.innerHTML = value;
                }
            </script> -->
        </div>
    </div>
{% endfor %}